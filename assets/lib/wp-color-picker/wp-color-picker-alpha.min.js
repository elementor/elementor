!function($){var image="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAAHnlligAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAHJJREFUeNpi+P///4EDBxiAGMgCCCAGFB5AADGCRBgYDh48CCRZIJS9vT2QBAggFBkmBiSAogxFBiCAoHogAKIKAlBUYTELAiAmEtABEECk20G6BOmuIl0CIMBQ/IEMkO0myiSSraaaBhZcbkUOs0HuBwDplz5uFJ3Z4gAAAABJRU5ErkJggg==",_before='<a tabindex="0" class="wp-color-result" />',_after='<div class="wp-picker-holder" />',_wrap='<div class="wp-picker-container" />',_button='<input type="button" class="button button-small hidden" />';Color.fn.toString=function(){if(this._alpha<1)return this.toCSS("rgba",this._alpha).replace(/\s+/g,"");var hex=parseInt(this._color,10).toString(16);if(this.error)return"";if(hex.length<6)for(var i=6-hex.length-1;i>=0;i--)hex="0"+hex;return"#"+hex},$.widget("wp.wpColorPicker",$.wp.wpColorPicker,{_create:function(){if($.support.iris){var self=this,el=self.element;$.extend(self.options,el.data()),self.close=$.proxy(self.close,self),self.initialValue=el.val(),el.addClass("wp-color-picker").hide().wrap(_wrap),self.wrap=el.parent(),self.toggler=$(_before).insertBefore(el).css({backgroundColor:self.initialValue}).attr("title",wpColorPickerL10n.pick).attr("data-current",wpColorPickerL10n.current),self.pickerContainer=$(_after).insertAfter(el),self.button=$(_button),self.options.defaultColor?self.button.addClass("wp-picker-default").val(wpColorPickerL10n.defaultString):self.button.addClass("wp-picker-clear").val(wpColorPickerL10n.clear),el.wrap('<span class="wp-picker-input-wrap" />').after(self.button),el.iris({target:self.pickerContainer,hide:self.options.hide,width:self.options.width,mode:self.options.mode,palettes:self.options.palettes,change:function(event,ui){self.options.alpha?(self.toggler.css({"background-image":"url("+image+")"}).html("<span />"),self.toggler.find("span").css({top:"3px",left:"3px",bottom:"3px",right:"3px",position:"absolute","border-top-left-radius":"3px","border-bottom-left-radius":"3px",background:ui.color.toString()})):self.toggler.css({backgroundColor:ui.color.toString()}),$.isFunction(self.options.change)&&self.options.change.call(this,event,ui)}}),el.val(self.initialValue),self._addListeners(),self.options.hide||self.toggler.click()}},_addListeners:function(){var self=this;self.wrap.on("click.wpcolorpicker",function(event){event.stopPropagation()}),self.toggler.click(function(){self.toggler.hasClass("wp-picker-open")?self.close():self.open()}),self.element.change(function(event){var me=$(this),val=me.val();(""===val||self.element.hasClass("iris-error"))&&(self.options.alpha?(self.toggler.removeAttr("style"),self.toggler.find("span").css("backgroundColor","")):self.toggler.css("backgroundColor",""),$.isFunction(self.options.clear)&&self.options.clear.call(this,event))}),self.toggler.on("keyup",function(event){13!==event.keyCode&&32!==event.keyCode||(event.preventDefault(),self.toggler.trigger("click").next().focus())}),self.button.click(function(event){var me=$(this);me.hasClass("wp-picker-clear")?(self.element.val(""),self.options.alpha?(self.toggler.removeAttr("style"),self.toggler.find("span").css("backgroundColor","")):self.toggler.css("backgroundColor",""),$.isFunction(self.options.clear)&&self.options.clear.call(this,event)):me.hasClass("wp-picker-default")&&self.element.val(self.options.defaultColor).change()})}}),$.widget("a8c.iris",$.a8c.iris,{_create:function(){if(this._super(),this.options.alpha=this.element.data("alpha")||!1,this.element.is(":input")||(this.options.alpha=!1),"undefined"!=typeof this.options.alpha&&this.options.alpha){var self=this,el=self.element,_html='<div class="iris-strip iris-slider iris-alpha-slider"><div class="iris-slider-offset iris-slider-offset-alpha"></div></div>',aContainer=$(_html).appendTo(self.picker.find(".iris-picker-inner")),aSlider=aContainer.find(".iris-slider-offset-alpha"),controls={aContainer:aContainer,aSlider:aSlider};self.options.defaultWidth=el.width(),self._color._alpha<1||1!=self._color.toString().indexOf("rgb"),el.width(parseInt(self.options.defaultWidth+100)),$.each(controls,function(k,v){self.controls[k]=v}),self.controls.square.css({"margin-right":"0"});var emptyWidth=self.picker.width()-self.controls.square.width()-20,stripsMargin=emptyWidth/6,stripsWidth=emptyWidth/2-stripsMargin;$.each(["aContainer","strip"],function(k,v){self.controls[v].width(stripsWidth).css({"margin-left":stripsMargin+"px"})}),self._initControls(),self._change()}},_initControls:function(){if(this._super(),this.options.alpha){var self=this,controls=self.controls;controls.aSlider.slider({orientation:"vertical",min:0,max:100,step:1,value:parseInt(100*self._color._alpha),slide:function(event,ui){self._color._alpha=parseFloat(ui.value/100),self._change.apply(self,arguments)}})}},_change:function(){this._super();var self=this,el=self.element;if(this.options.alpha){var controls=self.controls,alpha=parseInt(100*self._color._alpha),color=self._color.toRgb(),gradient=["rgb("+color.r+","+color.g+","+color.b+") 0%","rgba("+color.r+","+color.g+","+color.b+", 0) 100%"],target=self.picker.closest(".wp-picker-container").find(".wp-color-result");if(controls.aContainer.css({background:"linear-gradient(to bottom, "+gradient.join(", ")+"), url("+image+")"}),target.hasClass("wp-picker-open")&&(controls.aSlider.slider("value",alpha),self._color._alpha<1)){var style=controls.strip.attr("style").replace(/rgba\(([0-9]+,)(\s+)?([0-9]+,)(\s+)?([0-9]+)(,(\s+)?[0-9\.]+)\)/g,"rgb($1$3$5)");controls.strip.attr("style",style)}}var reset=el.data("reset-alpha")||!1;reset&&self.picker.find(".iris-palette-container").on("click.palette",".iris-palette",function(){self._color._alpha=1,self.active="external",self._change()})},_addInputListeners:function(input){var self=this,debounceTimeout=100,callback=function(event){var color=new Color(input.val()),val=input.val();input.removeClass("iris-error"),color.error?""!==val&&input.addClass("iris-error"):color.toString()!==self._color.toString()&&("keyup"===event.type&&val.match(/^[0-9a-fA-F]{3}$/)||self._setOption("color",color.toString()))};input.on("change",callback).on("keyup",self._debounce(callback,debounceTimeout)),self.options.hide&&input.one("focus",function(){self.show()})}})}(jQuery);