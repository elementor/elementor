//
// Nested Tabs
//
.elementor-widget-n-tabs {
	--n-tabs-display: flex;
	--n-tabs-color-accent-fallback: #61CE70;
	--n-tabs-color-secondary-fallback: #54595F;
	--n-tabs-default-padding-block: 15px;
	--n-tabs-default-padding-inline: 35px;
	--n-tabs-background-color: transparent;
	--n-tabs-direction: row;
	--n-tabs-justify-content: center;
	--n-tabs-gap: 10px;
	--n-tabs-column-gap: var( --n-tabs-title-gap );
	--n-tabs-row-gap: var( --n-tabs-title-gap );
	--n-tabs-border-width: 1px;
	--n-tabs-border-color: #{$gray-light};
	--n-tabs-content-padding: initial;
	--n-tabs-content-border-radius: initial;
	--n-tabs-content-margin-gap: calc( var( --n-tabs-gap ) - var( --n-tabs-title-gap ) );
	--n-tabs-content-margin-block: var( --n-tabs-content-margin-gap ) 0px;
	--n-tabs-title-order: -1;
	--n-tabs-title-color: var( --e-global-color-secondary, var( --n-tabs-color-secondary-fallback ) );
	--n-tabs-title-color-hover: #{$white};
	--n-tabs-title-color-active: #{$white};
	--n-tabs-title-background-color: #{$editor-background-light};
	--n-tabs-title-background-color-hover: var( --e-global-color-accent, var( --n-tabs-color-accent-fallback ) );
	--n-tabs-title-background-color-active: var( --e-global-color-accent, var( --n-tabs-color-accent-fallback ) );
	--n-tabs-title-font-size: 1rem;
	--n-tabs-title-justify-content-toggle: initial;
	--n-tabs-title-align-items-toggle: center;
	--n-tabs-title-justify-content: center;
	--n-tabs-title-align-items: center;
	--n-tabs-title-direction: row;
	--n-tabs-title-gap: 10px;
	--n-tabs-title-flex-grow: 0;
	--n-tabs-title-padding-top: var( --n-tabs-default-padding-block );
	--n-tabs-title-padding-right: var( --n-tabs-default-padding-inline );
	--n-tabs-title-padding-bottom: var( --n-tabs-default-padding-block );
	--n-tabs-title-padding-left: var( --n-tabs-default-padding-inline );
	--n-tabs-title-border-radius: initial;
	--n-tabs-title-transition: 0.3s;
	--n-tabs-title-grid-space-between: initial;
	--n-tabs-column-width: auto;
	--n-tabs-title-width: initial;
	--n-tabs-spacer-top-height: 0px;
	--n-tabs-spacer-bottom-height: 0px;
	--n-tabs-icon-color: var( --e-global-color-secondary, var( --n-tabs-color-secondary-fallback ) );
	--n-tabs-icon-color-hover: var( --n-tabs-title-color-hover );
	--n-tabs-icon-color-active: #{$white};
	--n-tabs-icon-gap: 5px;
	width: 100%;
	max-width: 100%; /* Fix issue with new created n-tabs inside n-tabs with overflow */

	.e-n-tabs {
		display: flex;
		justify-content: initial;
		flex-direction: column;
		column-gap: initial;
		row-gap: initial;
		text-align: $start;
		min-width: 0;
		flex-wrap: wrap;
		grid-template-areas: var( --n-tabs-grid-template-areas );
		grid-template-columns: var( --n-tabs-grid-template-columns );
		overflow-x: var(--n-tabs-heading-overflow-x);
		flex-wrap: var(--n-tabs-heading-wrap);
		-ms-overflow-style: none;  /* IE and Edge */
		scrollbar-width: none;  /* Firefox */

		&::-webkit-scrollbar {
			display: none; /* Hide scrollbar for Chrome, Safari and Opera */
		}

		&.e-scroll {

			.e-n-tab-title {
				cursor: grabbing;
				cursor: -webkit-grabbing;
			}

			&-active {

				.e-n-tab-title {
					position: relative;

					&::before {
						content: '';
						position: absolute;
						inset-block: 0;
						inset-inline: -1000vw;
						z-index: $second-layer;
					}
				}
			}
		}

		&.set-container {
			--n-tabs-heading-wrap: wrap;

			.e-n-tab-title:not( :nth-child( 1 ) ) {
				display: none;
			}
		}
	}

	button.e-n-tab-title {
		border-style: initial;
	}

	.e-n-tab {

		&-title {
			display: flex;
			width: 100%;
			height: fit-content;
			flex-direction: var( --n-tabs-title-direction );
			align-items: var( --n-tabs-title-align-items-toggle, var( --n-tabs-title-align-items ) );
			justify-content: var( --n-tabs-title-justify-content-toggle, var( --n-tabs-title-justify-content ) );
			flex-grow: var( --n-tabs-title-flex-grow );
			flex-shrink: 0;
			gap: var( --n-tabs-icon-gap );
			border-width: var( --n-tabs-border-width );
			position: relative;
			cursor: pointer;
			margin-bottom: var( --n-tabs-title-gap );
			padding-top: var( --n-tabs-title-padding-top );
			padding-right: var( --n-tabs-title-padding-right );
			padding-bottom: var( --n-tabs-title-padding-bottom );
			padding-left: var( --n-tabs-title-padding-left );
			border-radius: var( --n-tabs-title-border-radius );
			transition: background var( --n-tabs-title-transition ),
					color var( --n-tabs-title-transition ),
					border var( --n-tabs-title-transition ),
					box-shadow var( --n-tabs-title-transition ),
					text-shadow var( --n-tabs-title-transition ),
					stroke var( --n-tabs-title-transition ),
					stroke-width var( --n-tabs-title-transition ),
					-webkit-text-stroke-width var( --n-tabs-title-transition ),
					-webkit-text-stroke-color var( --n-tabs-title-transition ),
					transform var( --n-tabs-title-transition );
			// Remove tap highlight color on iOS: https://developer.mozilla.org/en-US/docs/Web/CSS/-webkit-tap-highlight-color.
			-webkit-tap-highlight-color: transparent;
			-webkit-touch-callout: none;
			-webkit-user-select: none;
			-khtml-user-select: none;
			-moz-user-select: none;
			-ms-user-select: none;
			user-select: none; // Is the button styling sufficient?

			&:focus {
				outline-color: transparent;
			}

			&:focus-visible {
				outline-color: rgb(0, 95, 204);
			}

			& span svg,
			& span i {
				transition: color var( --n-tabs-title-transition ),
					fill var( --n-tabs-title-transition );
			}

			&-text {
				display: flex;
			  	align-items: center;
			  	font-size: var( --n-tabs-title-font-size );
			}

			.e-n-tab-icon {
				display: flex;
				align-items: center;
				flex-direction: column;
				order: var( --n-tabs-icon-order );
				overflow: hidden;

				i {
					font-size: var( --n-tabs-icon-size, var( --n-tabs-title-font-size ) );
				}

				svg {
					width: var( --n-tabs-icon-size, var( --n-tabs-title-font-size ) );
					height: var( --n-tabs-icon-size, var( --n-tabs-title-font-size ) );
				}

				&:empty {
					display: none;
				}
			}

			&:not( [aria-selected="true"] ) {
				background-color: var( --n-tabs-title-background-color );

				&,
				& a {
					color: var( --n-tabs-title-color );
				}

				.e-n-tab-icon {

					i {
						color: var( --n-tabs-icon-color );
					}

					svg {
						fill: var( --n-tabs-icon-color );
					}

					i,
					svg {

						&:last-child {
							transform: translate(0, -100vh);
							height: 0;
							opacity: 0;
						}
					}
				}

				+ .e-con {
					display: none;
				}
			}

			&:not( [aria-selected="true"] ):hover {

				&,
				& a {
					color: var( --n-tabs-title-color-hover );
				}

				.e-n-tab-icon {

					i {
						color: var( --n-tabs-icon-color-hover );
					}

					svg {
						fill: var( --n-tabs-icon-color-hover );
					}
				}
			}

			&[aria-selected="true"] {

				&,
				& a {
					color: var( --n-tabs-title-color-active );
				}

				.e-n-tab-icon {

					i {
						color: var( --n-tabs-icon-color-active );
					}

					svg {
						fill: var( --n-tabs-icon-color-active );
					}

					i,
					svg {

						&:first-child {
							transform: translate(0, -100vh);
							height: 0;
							opacity: 0;
						}
					}
				}

			  	// Remove the hover animation from the active tabs.
			  	&[class*="elementor-animation-"] {
					&:focus,
					&:active,
					&:hover {
						transform: initial;
						animation: initial;
					}
				}
			}

			+ .e-con {
				grid-area: content;
				margin-top: var( --n-tabs-content-margin-gap );
				margin-bottom: var( --n-tabs-title-gap );
			}

			&--last {

				+ .e-con {
					margin-bottom: 0;
				}
			}
		}
	}
}

.elementor .elementor-element.elementor-widget-n-tabs > .elementor-widget-container > .e-n-tabs > .e-n-tab-title:hover {
	background-color: var( --n-tabs-title-background-color-hover );
	background-image: initial;
}

// TODO: Fix `Group_Control_Background` control. Currently the global default colours aren't generated inside CSS.
:is( .elementor .elementor-element.elementor-widget-n-tabs > .elementor-widget-container > .e-n-tabs > .e-n-tab-title ) {

	&[aria-selected="true"] {
		background-color: var( --n-tabs-title-background-color-active );
		background-image: initial;
	}
}

// Desktop mode.
@mixin display-type-desktop-($device) {
	.elementor-widget-n-tabs {

		.e-n-tabs {
			display: var(--n-tabs-display);
			justify-content: var( --n-tabs-justify-content );
			flex-direction: var( --n-tabs-direction );
			column-gap: var( --n-tabs-column-gap );
			row-gap: var( --n-tabs-row-gap );
		}

		.e-n-tab-title {
			width: var( --n-tabs-title-width-toggle, var( --n-tabs-title-width ) );
			order: var( --n-tabs-title-order );
			margin: 0;

			+ .e-con {
				margin-block: var( --n-tabs-content-margin-block );
			}
		}
	}
}

// Mobile.
@media (min-width: $screen-mobile-next) {
	@include display-type-desktop-(mobile);
}

// Mobile Extra.
@media (min-width: $screen-mobile-extra-next) {
	@include display-type-desktop-(mobile_extra);
}

// Tablet.
@media (min-width: $screen-tablet-next) {
	@include display-type-desktop-(tablet);
}

// Tablet Extra.
@media (min-width: $screen-tablet-extra-next) {
	@include display-type-desktop-(tablet_extra);
}

// Laptop.
@media (min-width: $screen-desktop-min) {
	@include display-type-desktop-(laptop);
}


// Breakpoint - none.
.e-n-tabs-none {
	> .elementor-widget-container > .e-n-tabs > .e-n-tabs-content > .e-collapse {
		display: none;
	}
}
